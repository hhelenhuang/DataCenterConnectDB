@using DataCenterConnectDB.Models;

<main>
    <div class="page-section">
        <div class="container">

            <h2><b>資料申請</b></h2>
            <form>
                <h5>※ 基本資料</h5>

                <div class="row mb-3">
                    <div class="col">
                        <h6><label for="exampleFormControlInput1">申請人姓名</label></h6>
                        <input type="text" class="form-control" id="ApplyName">
                    </div>
                    <div class="col">
                        <h6><label for="exampleFormControlInput2">聯絡人姓名</label></h6>
                        <input type="text" class="form-control" id="ContractName">
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col">
                        <h6><label for="exampleFormControlInput1">申請人身分證字號</label></h6>
                        <input type="text" class="form-control" id="ApplyIDNO">
                    </div>
                    <div class="col">
                        <h6><label for="exampleFormControlInput2">聯絡人身分證字號</label></h6>
                        <input type="text" class="form-control" id="ContractIDNO">
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col">
                        <h6><label for="exampleFormControlInput3">申請人服務單位/科別</label></h6>
                        <input type="text" class="form-control" id="ApplyDepartment" placeholder="醫學系">
                    </div>
                    <div class="col">
                        <h6><label for="exampleFormControlInput4">聯絡人服務單位/科別</label></h6>
                        <input type="text" class="form-control" id="ContractDepartment" placeholder="耳鼻喉科">
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col">
                        <h6><label for="exampleFormControlInput3">申請人職稱</label></h6>
                        <input type="text" class="form-control" id="ApplyPosition" placeholder="醫學系">
                    </div>
                    <div class="col">
                        <h6><label for="exampleFormControlInput4">申請人職稱</label></h6>
                        <input type="text" class="form-control" id="ContractPosition" placeholder="耳鼻喉科">
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col">
                        <h6><label for="exampleFormControlInput5">申請人連絡電話</label></h6>
                        <input type="text" class="form-control" id="ApplyPhone">
                    </div>
                    <div class="col">
                        <h6><label for="exampleFormControlInput6">聯絡人連絡電話</label></h6>
                        <input type="text" class="form-control" id="ContractPhone">
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col">
                        <h6><label for="exampleFormControlInput7">申請人連絡e-mail</label></h6>
                        <input type="email" class="form-control" id="ApplyEmail">
                    </div>
                    <div class="col">
                        <h6><label for="exampleFormControlInput8">聯絡人連絡e-mail</label></h6>
                        <input type="email" class="form-control" id="ContractEmail">
                    </div>
                </div>

                <div class="form-group">
                    <h6><label for="exampleFormControlSelect1">申請資料屬性</label></h6>
                    <select class="form-control" id="ApplyType">
                        <option>學術使用</option>
                        <option>醫療使用</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="exampleFormControlInput9">申請案名</label>
                    <input type="text" class="form-control" id="ApplyName">
                </div>

                <div class="form-group">
                    <label class="">申請期限</label>
                    <br>
                    <input type="text" name="daterange" id="ApplyDate" />
                </div>


                <br>

                <div class="row m-0">
                    <h5>※ 參與研究與處理資料人員清冊</h5>
                    <table class="table table-hover my-2">
                        <thead class="">
                            <tr>
                                <th>No</th>
                                <th>姓名</th>
                                <th>身分證字號</th>
                                <th>單位/職稱</th>
                                <th>連絡電話</th>
                                <th>Email</th>
                                <th>刪除</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>

                    </table>
                </div>

                <div class="row m-0">
                    <button type="button" class="btn btn-primary d-print-none" onclick="addRow()">新增</button>
                </div>

                <p><h6>註: 計畫主持人提出資料申請單取得資料後，如欲變更使用方法或使用範圍，皆視為變更申請內容，應該重新提出資料申請單，並經由本中心委員會審查通過後，方能重新申請相關資料。</h6></p>
                <p><h6><b>本人(申請者)：　 　　　　　 　   (簽章) 日期： 　　年　　月　　日</b></h6></p>
                <br>
                <p><h6><b>申請者主管簽章：　 　　　　　 　 (簽章) 日期： 　　年　　月　　日</b></h6></p>
                <br>

                <div class="form-group">
                    <h5><label for="exampleFormControlTextarea1">※ 資料用途描述(500字以內摘要)</label></h5>
                    <textarea class="form-control" id="ApplyDescribe" rows="10"
                              placeholder="舉例:
(一) 預期進行之研究設計
敘述型研究 (descriptive study)
橫斷式研究 (cross-sectional study)
世代研究 (cohort study)…
(二) 研究核心問題類型簡述
發生率、盛行率研究 /疾病監測
臨床介入之使用率與相關因子研究
疾病成因與共病症關聯性研究…"></textarea>
                </div>
                <div class="form-group">
                    <h5>
                        <label for="exampleFormControlTextarea1">※ 所需資料內容及使用範圍(不限字數)</label>
                    </h5>
                    <textarea class="form-control" id="ApplyContent" rows="10"
                              placeholder="舉例:
內容舉例:
(一)	研究對象入選條件
1.	年齡18歲以上之糖尿病患者(診斷碼為ICD-9: 250.xx)
(二)	研究對象排除條件
1.	有癌症病史
(三)	結果變項(依變項)定義
1.	主要結果變項為死亡; 次要結果變項為住院天數
(四)	解釋變項(自變項)定義
1.	介入; 用藥; 疾病病史
(五)	其他解釋變項(自變項)或干擾因子定義
(六)	主要參考文獻(至少兩篇、至多五篇)
(七)	資料使用範圍
"></textarea>

                </div>
                <br>
                <hr>

                <h2><b>使用聲明書</b></h2>

                <div class="form-group row">
                    <label for="name" class="col-sm-2 col-form-label">本人</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="name" placeholder="申請者姓名">
                    </div>
                </div>
                <p> 茲向 (以下簡稱本中心)申請使用相關資料以進行:</p>
                <div class="form-group row">
                    <label for="planame" class="col-sm-2 col-form-label">研究計畫名稱:</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="planame">
                    </div>
                </div>
            </form>

           
            <br>

            <p><b> 本人(申請者)：　 　　　　　       　   (簽章)  日期：   　　年　　月　　日</b></p>

            <br>

            <div class="row m-0">
                <button type="button" class="btn btn-primary d-print-none" onclick="javascript:print()">列印文件</button>
                <button type="Submit" class="btn btn-primary ml-auto d-print-none">送出資料</button>
            </div>

        </div> <!-- .container -->
    </div> <!-- .page-section -->
    <script>
        let i = 1;

        function rowTemplate(i) {
            return `<tr data-index=${i}>
                                            <td>${i}</td>
                                            <td><input type="text" name="name-${i}"></td>
                                            <td><input type="text" name="indo-${i}"></td>
                                            <td><input type="text" name="department-${i}"></td>
                                            <td><input type="text" name="phone-${i}"></td>
                                            <td><input type="text" name="Email-${i}"></td>
                                            <td><i class="fa fa-times-circle" style="font-size: 22px; color: red;" onclick="removeRow(${i})"></i></td>
</tr>`
        }

        for (i = 1; i < 4; i++) {
            $('tbody').append(rowTemplate(i));
        }

        function removeRow(i) {
            $("tbody").find(`tr[data-index='${i}']`).remove();
        }

        function addRow() {
            $('tbody').append(rowTemplate(i));
            i++;
        }

        $(document).ready(function () {
            $(function () {
                $('input[name="daterange"]').daterangepicker({
                    "startDate": "2023/01/01",
                    "endDate": "2023/12/31",
                    opens: 'center',
                    locale: {
                        format: 'YYYY/MM/DD'
                    }
                });
            });
        });
    </script>
</main>